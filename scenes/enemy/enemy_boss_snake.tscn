[gd_scene load_steps=21 format=3 uid="uid://c4c77cdqptgq8"]

[ext_resource type="Script" uid="uid://cbm4inu0l5omw" path="res://scripts/enemy/BossSnake.gd" id="1_dhpoj"]
[ext_resource type="Texture2D" uid="uid://cvor1sxuokmka" path="res://assets/gfx/sprites/enemy_snake_head.png" id="2_vuglt"]
[ext_resource type="Script" uid="uid://cncblu3wrihfi" path="res://scripts/enemy/BossSnakeAI.gd" id="4_5cj6h"]
[ext_resource type="Script" uid="uid://dovrmdtqiurir" path="res://scripts/player/HpNode.gd" id="4_rukl6"]
[ext_resource type="Script" uid="uid://cy6oe8emo4iir" path="res://scripts/systems/PhaseResource.gd" id="5_dhpoj"]
[ext_resource type="AudioStream" uid="uid://b6a4xqfrrc100" path="res://assets/audio/bgm/stage2_boss_bgm_kari.mp3" id="5_vuglt"]
[ext_resource type="Script" uid="uid://bps01f3m37042" path="res://scripts/systems/EnemyPatternResource.gd" id="6_p22mw"]
[ext_resource type="PackedScene" uid="uid://cyyoe8pge3tsh" path="res://scenes/attackCores/controller/attack_core_slot.tscn" id="14_wxu4v"]
[ext_resource type="Script" uid="uid://cs5tqw24uumih" path="res://scripts/player/UniversalAttackCoreSlot.gd" id="15_pdwag"]
[ext_resource type="PackedScene" uid="uid://bu48bcyms674m" path="res://scenes/attackCores/universal_attack_core.tscn" id="16_dmrm3"]

[sub_resource type="AtlasTexture" id="AtlasTexture_dhpoj"]
atlas = ExtResource("2_vuglt")
region = Rect2(0, 0, 128, 128)

[sub_resource type="SpriteFrames" id="SpriteFrames_jrb5u"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_dhpoj")
}],
"loop": true,
"name": &"default",
"speed": 3.0
}]

[sub_resource type="CircleShape2D" id="CircleShape2D_p22mw"]
radius = 48.0416

[sub_resource type="Resource" id="Resource_271uf"]
script = ExtResource("6_p22mw")
movement_type = 0
move_to = Vector2(1200, -200)
move_time = 0.0
direction_type = 0
move_angle = 0.0
move_speed = 100.0
use_movement_bounds = false
movement_bounds = Rect2(0, 0, 1, 1)
core_to_enable = ""
core_duration = 3.0
change_animation = false
animation_name = ""
restore_animation = true
dialogue_path = ""
metadata/_custom_type_script = "uid://bps01f3m37042"

[sub_resource type="Resource" id="Resource_p22mw"]
script = ExtResource("6_p22mw")
movement_type = 2
move_to = Vector2(0, 0)
move_time = 0.0
direction_type = 0
move_angle = 0.0
move_speed = 100.0
use_movement_bounds = false
movement_bounds = Rect2(0, 0, 1, 1)
core_to_enable = ""
core_duration = 3.0
change_animation = false
animation_name = ""
restore_animation = true
dialogue_path = "s2d12.intro"
metadata/_custom_type_script = "uid://bps01f3m37042"

[sub_resource type="Resource" id="Resource_ykyfs"]
script = ExtResource("5_dhpoj")
patterns = Array[ExtResource("6_p22mw")]([SubResource("Resource_271uf"), SubResource("Resource_p22mw")])
loop_type = 0
metadata/_custom_type_script = "uid://cy6oe8emo4iir"

[sub_resource type="Resource" id="Resource_sxpga"]
script = ExtResource("6_p22mw")
movement_type = 0
move_to = Vector2(448, 50)
move_time = 3.0
direction_type = 0
move_angle = 0.0
move_speed = 100.0
use_movement_bounds = false
movement_bounds = Rect2(0, 0, 1, 1)
core_to_enable = ""
core_duration = 3.0
change_animation = false
animation_name = ""
restore_animation = true
dialogue_path = ""
metadata/_custom_type_script = "uid://bps01f3m37042"

[sub_resource type="Resource" id="Resource_3kx4q"]
script = ExtResource("6_p22mw")
movement_type = 0
move_to = Vector2(448, 200)
move_time = 1.0
direction_type = 0
move_angle = 0.0
move_speed = 100.0
use_movement_bounds = false
movement_bounds = Rect2(0, 0, 1, 1)
core_to_enable = ""
core_duration = 3.0
change_animation = false
animation_name = ""
restore_animation = true
dialogue_path = ""
metadata/_custom_type_script = "uid://bps01f3m37042"

[sub_resource type="Resource" id="Resource_dhpoj"]
script = ExtResource("6_p22mw")
movement_type = 2
move_to = Vector2(0, 0)
move_time = 0.0
direction_type = 0
move_angle = 0.0
move_speed = 100.0
use_movement_bounds = false
movement_bounds = Rect2(0, 0, 1, 1)
core_to_enable = ""
core_duration = 3.0
change_animation = false
animation_name = ""
restore_animation = true
dialogue_path = "s2d12.battle_conversation"
metadata/_custom_type_script = "uid://bps01f3m37042"

[sub_resource type="Resource" id="Resource_mkt0q"]
script = ExtResource("5_dhpoj")
patterns = Array[ExtResource("6_p22mw")]([SubResource("Resource_sxpga"), SubResource("Resource_3kx4q"), SubResource("Resource_dhpoj")])
loop_type = 0
metadata/_custom_type_script = "uid://cy6oe8emo4iir"

[node name="BossSnake" type="Area2D" groups=["enemies"]]
collision_layer = 3
collision_mask = 3
script = ExtResource("1_dhpoj")
segment_count = 40
segment_spacing = 35.0

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
scale = Vector2(1.3, 1.3)
sprite_frames = SubResource("SpriteFrames_jrb5u")
frame_progress = 0.855812

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_p22mw")

[node name="HpNode" type="Node" parent="."]
script = ExtResource("4_rukl6")
max_hp = 2800

[node name="EnemyAI" type="Node" parent="."]
script = ExtResource("4_5cj6h")
phases = Array[ExtResource("5_dhpoj")]([SubResource("Resource_ykyfs"), SubResource("Resource_mkt0q")])
_bgm = ExtResource("5_vuglt")
chase_max_speed = 300.0
circle_speed = 300.0
circle_radius = 400.0
rush_duration = 2.0
chase_to_circle_distance = 450.0
circle_to_rush_max_distance = 600.0
circle_to_chase_distance = 700.0
circle_to_rush_time = 3.0
circle_max_time = 5.0
base_speed = 250.0

[node name="AttackCoreSlot" parent="." instance=ExtResource("14_wxu4v")]
script = ExtResource("15_pdwag")
default_core_scene = ExtResource("16_dmrm3")
attack_pattern = null
auto_create_core = true
